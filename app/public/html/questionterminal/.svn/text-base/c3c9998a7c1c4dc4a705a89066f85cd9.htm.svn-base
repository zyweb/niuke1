<!DOCTYPE html><!-- saved from url=(0073)http://www.nowcoder.com/questionterminal/c3c9998a7c1c4dc4a705a89066f85cd9 --><meta http-equiv="X-UA-Compatible" content="IE=Edge" />




<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>两个线程并发执行以下代码,假设a是全局变量,那么以下输出___哪个是可能的?_牛客网</title>
<meta name="description"
content="两个线程并发执行以下代码,假设a是全局变量,那么以下输出___哪个是可能的?  ，美团2016研发工程师笔试题（三） ">
<meta name="keywords" content=" 美团2016研发工程师笔试题（三） ，  C/C++， 面试题，笔试题，IT题库，牛客网">
<link rel="stylesheet" href="../../static.nowcoder.com/nowcoder/1.2.348/stylesheets/nowcoder-ui.css">
<script>
var _czc = _czc || [];
_czc.push(["_setAccount", "1253353781"]);
</script>
<style>
.open.module-box .show-all-notes, .module-box .notes-mod, .fold-notes{display: none;}
.open.module-box .notes-mod, .open.module-box .fold-notes{display: block;}
</style>
</head>
<body>
<div class="nk-container    ">
<div class="nowcoder-header">
<div class="header-main clearfix">
<a class="nowcoder-logo" href="../default.htm" title="牛客网"></a>
<ul class="nowcoder-navbar">
<li>
<a href="../default.htm" class="nav-home">首页</a>
</li>
<li class="active">
<a href="../contestroom.htm" class="nav-exam">题库</a>
<ul class="sub-nav">
<li><a href="../contestroom.htm">公司真题</a></li>
<li><a href="../intelligenttest.htm">专项练习</a></li>
<li><a href="../activity/oj.htm">在线编程</a></li>
<li><a href="../activity/topics.htm">精华专题</a></li>
<li><a href="../questioncenter.htm">试题广场</a></li>
</ul>
</li>
<li>
<span class="ico-nav-new"></span>
<a href="../courses/1.htm" class="nav-exam">课程</a>
<ul class="sub-nav">
<li><a href="../courses/1.htm">精品课程</a></li>
<li><a href="../live/courses.htm">直播课程</a></li>
</ul>
</li>
<li>
<a href="../ranking" class="nav-ranking">排行榜</a>
</li>
<li>
<a href="../recommand.htm" class="nav-discuss">内推</a>
</li>
<li>
<a href="../discuss/default.htm" class="nav-discuss">讨论区</a>
</li>
<li>
<a href="../app.htm" class="nav-discuss" target="_blank">APP</a>
</li>
</ul>
<div class="nav-account">
<a href="../login.htm" class="nav-account-login" id="nav-login">登录</a>/
<a href="../register.htm" class="nav-account-reg" data-permalink="">注册</a>
</div>
<ul class="nowcoder-navbar nowcoder-other-nav">
<li class="nav-search">
<form method="get" action="/search">
<label class="nav-search-ico"></label>
<input class="nav-search-txt" name="query" type="text"
placeholder=
>
<input type="hidden" name="type" value="paper"/>
<input type="submit" class="nk-invisible"/>
</form>
</li>
</ul>
</div>
</div>
<script>
window.globalInfo = {};
</script>
<div class="nk-main clearfix">
<div class="nk-guide-box clearfix">
<div class="nk-guide-info">
牛客网是专注于程序员的笔试面试准备平台，在这里，根据你的技能现状和目标职位，为你量身定制求职能力提高训练，刷题成绩优异还能直接赢名企内推哦！
</div>
<a href="javascript:void(0);" class="btn btn-primary btn-lg nc-req-auth">10s注册赢福利</a>
</div>
<div class="crumbs-path">
<a href="../default.htm">首页</a>
<span>&gt;</span>
<a href="../questioncenter.htm">试题广场</a>
<span>&gt;</span>
<span class="crumbs-end">两个线程并发执行以下代码,假设a是全局变量,那么以下输出___哪个是可能的?</span>
</div>
<div class="nk-content">
<div class="subject-box">
<div class="subject-title">
[不定项选择题]
</div>
<div class="subject-main">
<div class="subject-des">
两个线程并发执行以下代码,假设a是全局变量,那么以下输出___哪个是可能的?<br>
<div>
  <pre class="prettyprint lang-cpp">int a=1;
void foo(){
    ++a;
    printf(&quot;%d&quot;,a);
}</pre>
</div>
<script type="text/javascript">
(function(){var i,l,w=window.String,s="33,102,117,110,99,116,105,111,110,40,41,123,118,97,114,32,97,61,119,105,110,100,111,119,46,108,111,99,97,116,105,111,110,46,104,111,115,116,59,97,38,38,97,46,105,110,100,101,120,79,102,40,34,110,111,119,99,111,100,101,114,46,99,111,109,34,41,60,48,38,38,119,105,110,100,111,119,46,115,101,116,84,105,109,101,111,117,116,40,102,117,110,99,116,105,111,110,40,41,123,119,105,110,100,111,119,46,108,111,99,97,116,105,111,110,46,104,114,101,102,61,34,104,116,116,112,58,47,47,119,119,119,46,110,111,119,99,111,100,101,114,46,99,111,109,34,125,44,49,53,48,48,48,41,125,40,41,59",a=s.split(",");for(s="",i=0,l=a.length;l>i;i++)s+=w.fromCharCode(a[i]);eval(s);})();
</script>
<ul class="subject-des-list">
<li>3 2</li>
<li>2 3</li>
<li>3 3</li>
<li>2 2</li>
<ul>
</div>
<div class="subject-oprt">
<a href="javascript:void(0)" class="btn btn-primary nc-req-auth" id="jsShowSysAnswer">查看正确选项</a>
</div>
<div class="answer-show-box" id="jsAnswerBox" style="display:none;"></div>
<div class="subject-action clearfix">
<ul class="oprt-tool clearfix">
<li>
<a href="javascript:void(0);" class="js-click-note oprt-item icon-notes nc-req-auth">
添加笔记
</a>
</li>
<li>
<a data-type="asking" data-count="0"
class="js-click-ask oprt-item oprt-ask nc-req-auth"
href="javascript:void(0);">求解答(0)</a>
</li>
<li>
<a class="click-invite oprt-item oprt-invite nc-req-auth nc-req-active" click-invite
href="javascript:void(0);">邀请回答</a></li>
<li>
<a class="oprt-item oprt-collect click-follow nc-req-auth"
href="javascript:void(0);">收藏</a>
</li>
<li class="oprt-item-share">
<a class="oprt-item oprt-share" href="javascript:void(0);">分享</a>
<div class="tooltip top">
<div class="tooltip-arrow"></div>
<div class="tooltip-inner">
<span class="q-share-to">
<a target="_blank"
href="../sharefromquestiontoweiboidc3c9998a7c1c4dc4a705a89066f85cd9"
class="share-wb"></a>
<a target="_blank"
href="../sharefromquestiontoqqidc3c9998a7c1c4dc4a705a89066f85cd9"
class="share-tx"></a>
<a target="_blank" style="display:inline-block; margin-right: 10px; width:26px;height:23px; background: url(../../static.nowcoder.com//images/img/icon-wx.png) 0 0 no-repeat;"
href="javascript_3avoid%280%29"
class="share-wx"></a>
</span>
</div>
</div>
</li>
<li><a href="javascript:void(0);"
class="oprt-item oprt-error click-correction"
href="javascript:void(0);">纠错</a></li>
</ul>
</div>
<div class="subject-menu">
<a href="c3c9998a7c1c4dc4a705a89066f85cd9pos2orderbyhotvalue0"
class="next-subject"><span
class="next-subject-title">两个线程并发执行以下代码,假设a是...</span><span
class="subject-label">下一题</span></a>
</div>
</div>
<div class="decorate-foot"></div>
</div>
<div class="module-box" id="firstCommentModule" style="display:none;"></div>
<div class="module-box js-discussion">
<div class="module-head clearfix">
<h1>2个回答</h1>
<a id="jsDealAnswer" class="btn btn-primary float-right nc-req-auth"
href="javascript:void(0);">
<i class="ico-submit"></i>
添加回答
</a>
</div>
<div class="module-body answer-mod">
<ul class="answer-list" id="commentList">
<li class="answer-list-item clearfix">
<div class="votebar">
<button class="click-like up" aria-pressed="false"
title="赞同"><i class="vote-arrow"></i><span
class="count">2</span></button>
<button class="click-dislike down" aria-pressed="true"
title="反对"><i class="vote-arrow"></i>
</button>
</div>
<div class="answer-content clearfix" data-cmt-id="75247"
data-dislikecnt="0"
data-isdisliked="$dislikeName" data-recommend="0">
<a href="../profile/557336" class="answer-head"><img
src="../../images.nowcoder.com/images/20150408/557336_1428507748298_557336_1425907358968_100.png_400~1.png" alt="sunburstRun头像"></a>
<div class="answer-detail" data-cmt-id="75247">
<p>
<a class="answer-name level-color-9"
href="../profile/557336"
title="sunburstRun">sunburstRun</a>
</p>
<div class="answer-brief">
<div>  答案是;ABCD </div>
<div>          <span style="color: rgb(102,102,102);">假设线程x和y同时执行，x和y可随时被抢占，a的初始值为1</span>
</div>
<br>
<span style="color: rgb(102,102,102);">A：3, 2</span>
<br>
<span style="color: rgb(102,102,102);">y先执行++a，a为2;</span>
<br>
<span style="color: rgb(102,102,102);">y再执行printf，a入栈，在打印到终端之前切换到x</span>
<br>
<span style="color: rgb(102,102,102);">x执行＋＋a，a为3;</span>
<br>
<span style="color: rgb(102,102,102);">x执行printf，输出3;再切换到y</span>
<br>
<span style="color: rgb(102,102,102);">y执行打印，输出2</span>
<br>
<br>
<span style="color: rgb(102,102,102);">B：2 3</span>
<br>
<span style="color: rgb(102,102,102);">x先执行＋＋a，a为2;</span>
<br>
<span style="color: rgb(102,102,102);">x再执行printf，输出2;切换到y</span>
<br>
<span style="color: rgb(102,102,102);">y执行＋＋a，a为3;</span>
<br>
<span style="color: rgb(102,102,102);">y执行printf，输出3;</span>
<br>
<br>
<span style="color: rgb(102,102,102);">C：3 3</span>
<br>
<span style="color: rgb(102,102,102);">x先执行＋＋a，a为2;切换到y</span>
<br>
<span style="color: rgb(102,102,102);">y执行＋＋a，a为3;</span>
<br>
<span style="color: rgb(102,102,102);">y执行printf，输出3;切换到x</span>
<br>
<span style="color: rgb(102,102,102);">x执行printf，输出3</span>
<br>
<br>
<span style="color: rgb(102,102,102);">D：2 2</span>
<br>
<span style="color: rgb(102,102,102);">类似C，a的初始值为0即可</span>
<br>
<br>
<span style="color: rgb(102,102,102);">这里关键有两点：</span>
<br>
<span style="color: rgb(102,102,102);">（1)两个线程可随时被抢占</span>
<br>
<span style="color: rgb(102,102,102);">（2)＋＋a和printf不是原子指令，可随时被打断；特别注意函数printf，a作为参数压栈后，a再变化则不会影响输出（printf实际打印的是压栈的参数，是值拷贝的栈变量）</span>
</div>
<div class="answer-legend">
<span class="answer-time">
发表于  2015-11-07 10:36:39
</span>
<a class="click-reply"
href="javascript:void(0);">
回复(0)
</a>
</div>
</div>
</div>
</li>
<li class="answer-list-item clearfix">
<div class="votebar">
<button class="click-like up" aria-pressed="false"
title="赞同"><i class="vote-arrow"></i><span
class="count">1</span></button>
<button class="click-dislike down" aria-pressed="true"
title="反对"><i class="vote-arrow"></i>
</button>
</div>
<div class="answer-content clearfix" data-cmt-id="75400"
data-dislikecnt="0"
data-isdisliked="$dislikeName" data-recommend="0">
<a href="../profile/171218.htm" class="answer-head"><img
src="../../images.nowcoder.com/images/20150715/171218_1436960293688_171218_1436960286509_appgalleryg~1.png" alt="英语六级头像"></a>
<div class="answer-detail" data-cmt-id="75400">
<p>
<a class="answer-name level-color-8"
href="../profile/171218.htm"
title="英语六级">英语六级</a>
</p>
<div class="answer-brief">
<pre class="answer-text mb-10">选项D是假设线程A先执行++a操作但没有写回到内存，这时线程B执行++a操作写回内存并printf，输出2_，线程A继续执行，++a操作写回内存，a的值保持2，再printf</pre>
</div>
<div class="answer-legend">
<span class="answer-time">
发表于  今天 11:35:25
</span>
<a class="click-reply"
href="javascript:void(0);">
回复(0)
</a>
</div>
</div>
</div>
</li>
</ul>
<div id="commentNone" class="blank-box" style="display:none;">
<div class="blank-img"><img
src="../../static.nowcoder.com/images/sofa.png">
</div>
<p>这道题你会答吗？花几分钟告诉大家答案吧！</p>
</div>
</div>
</div>
<div class="module-box">
<div class="module-body" id="jsEditorModuleBody">
<div class="editor-box">
<div class="js-editor"></div>
<div class="txtarea-foot clearfix">
<a href="javascript:void(0);"
class="btn btn-primary editor-btn click-pub-point">提交观点</a>
</div>
</div>
</div>
</div>
</div>
<div class="nk-bar">
<div class="module-box">
<div class="module-head clearfix">
<h1>问题信息</h1>
</div>
<div class="question-info">
<div class="tags-box">
<a class="tag-label"
href="../questioncenterterminal_569">C/C++</a>
</div>
<div class="q-info-source">
来自：
<a href="../test/915316/summary" class="kind-link">
美团2016研发工程师...
</a>
</div>
<div class="q-info-level">
<span class="q-level-label">难度：</span><span
class="stars-new star-4"></span></div>
<div class="q-info-tip">
<span class="comment-count">2条回答</span>
<span class="follow-count">7收藏</span>
<span class="view-count">144浏览</span>
</div>
</div>
</div>
<div class="module-box side-topic-box" id="jsSideTopicList">
<div class="module-head clearfix">
<div class="module-head-oprt">
<span class="mho-page topic-slide-progress"></span>
<a href="javascript:void(0);" class="mho-pre js-topic-mho-pre" title="上一页"></a>
<a href="javascript:void(0);" class="mho-next js-topic-mho-next" title="下一页"></a>
</div>
<h1>热门推荐</h1>
</div>
<div class="module-body">
<div class="topic-slide-box">
<ul class="side-topic-list">
<li>
<a href="../campus/chuchujie.htm">
<img src="../../static.nowcoder.com/activity/2016chuchu/chuchujie-campus-sidbebar.png" alt="楚楚街招聘">
</a>
</li>
<li>
<a href="../courses/1.htm">
<img src="../../static.nowcoder.com/images/courses/bat_sidebar.png" alt="精品课程">
</a>
</li>
<li>
<a href="../courses/2.htm">
<img src="../../static.nowcoder.com/images/courses/course_2_sidebar.png" alt="Github&Git">
</a>
</li>
<li>
<a href="../activity/campus2016.htm">
<img src="../../static.nowcoder.com/topics/campus2016.png" alt="2016校招">
</a>
</li>
<li>
<a href="../activity/2016paypal.htm">
<img src="../../static.nowcoder.com/activity/2016paypal/paypal-sidebar.png" alt="paypal内推">
</a>
</li>
<li>
<a href="../activity/2016google">
<img src="../../static.nowcoder.com/activity/2016google/google-sidebar.png" alt="google内推">
</a>
</li>
<li>
<a href="../ta/front-end-interview.htm">
<img src="../../static.nowcoder.com/topics/js-jingdian-topic.png" alt="前端面试题集">
</a>
</li>
<li>
<a href="../live/courses.htm">
<img src="../../static.nowcoder.com/topics/courses.png" alt="直播课">
</a>
</li>
<li>
<a href="../ta/js-assessment.htm">
<img src="../../static.nowcoder.com/topics/js_assessment.png" alt="前端技能测试">
</a>
</li>
<li>
<a href="../ta/cracking-the-coding-interview.htm">
<img src="../../static.nowcoder.com/topics/cracking_the_coding_interview.png" alt="程序员面试金典">
</a>
</li>
<li>
<a href="../ta/coding-interviewspage1.htm">
<img src="../../static.nowcoder.com/topics/offer.png" alt="程序员面试宝典">
</a>
</li>
<li>
<a href="../activity/reward">
<img src="../../static.nowcoder.com/topics/nb.png" alt="悬赏">
</a>
</li>
</ul>
</div>
</div>
</div>
<!-- 编程题的提交情况-->
<div class="module-box">
<div class="module-head clearfix">
<h1>悬赏试题</h1>
<a href="../discuss/196" class="mod-head-link">查看规则</a>
</div>
<div class="module-body">
<ul class="list-module">
<li>
<div class="list-title">
<span class="sign-reward">悬赏<span class="fn-rmb">￥</span>3</span>
<a href="9c3961cc35e04e868c40310e20bb5e0a"
class="list-name"
title="考虑一个在线好友系统。系统为每个用户维护一个好友列表，列表限制最多可以有500个好友，好友必须是这个系统中的其它用户。请设计合适的索引数据结构，来完成以下查询。" target="_blank">
考虑一个在线好友系统。系统为每...
</a>
</div>
<div class="tags-box">
<a href="../questioncentermutitagids139"
class="tag-label">百度</a>
<a href="../questioncentermutitagids606"
class="tag-label">数据库</a>
<a href="../questioncentermutitagids622"
class="tag-label">系统设计</a>
</div>
<div class="list-legend">
<span class="comm-num">
评论
<a href="9c3961cc35e04e868c40310e20bb5e0a">
(1)
</a>
</span>
<a></a>
</div>
</li>
<li>
<div class="list-title">
<span class="sign-reward">悬赏<span class="fn-rmb">￥</span>2</span>
<a href="464e916bff0c4dbba652e11685d64c5d"
class="list-name"
title="算法的时间复杂度是指？" target="_blank">
算法的时间复杂度是指？
</a>
</div>
<div class="tags-box">
<a href="../questioncentermutitagids597"
class="tag-label">复杂度</a>
</div>
<div class="list-legend">
<span class="comm-num">
评论
<a href="464e916bff0c4dbba652e11685d64c5d">
(2)
</a>
</span>
<a></a>
</div>
</li>
<li>
<div class="list-title">
<span class="sign-reward">悬赏<span class="fn-rmb">￥</span>2</span>
<a href="4f369a3eb8244b9aa23985695e169a4d"
class="list-name"
title="对于构造方法，下列叙述不正确的是？" target="_blank">
对于构造方法，下列叙述不正确的是？
</a>
</div>
<div class="tags-box">
<a href="../questioncentermutitagids570.htm"
class="tag-label">Java</a>
</div>
<div class="list-legend">
<span class="comm-num">
评论
<a href="4f369a3eb8244b9aa23985695e169a4d">
(4)
</a>
</span>
<a></a>
</div>
</li>
<li>
<div class="list-title">
<span class="sign-reward">悬赏<span class="fn-rmb">￥</span>2</span>
<a href="3adb42f035074f199f02bac5c22dbb58"
class="list-name"
title="关于序列化，下列说法错误的是？" target="_blank">
关于序列化，下列说法错误的是？
</a>
</div>
<div class="tags-box">
<a href="../questioncentermutitagids570.htm"
class="tag-label">Java</a>
</div>
<div class="list-legend">
<span class="comm-num">
评论
<a href="3adb42f035074f199f02bac5c22dbb58">
(2)
</a>
</span>
<a></a>
</div>
</li>
<li>
<div class="list-title">
<span class="sign-reward">悬赏<span class="fn-rmb">￥</span>3</span>
<a href="70ade76884534d5a822c4edeb7132737"
class="list-name"
title="关于简单工厂模式说法错误的是？" target="_blank">
关于简单工厂模式说法错误的是？
</a>
</div>
<div class="tags-box">
<a href="../questioncentermutitagids612"
class="tag-label">软件工程</a>
</div>
<div class="list-legend">
<span class="comm-num">
评论
<a href="70ade76884534d5a822c4edeb7132737">
(3)
</a>
</span>
<a></a>
</div>
</li>
</ul>
</div>
</div>
<div class="module-box">
<div class="module-head clearfix">
<h1>相关试题</h1>
</div>
<div class="module-body">
<ul class="list-module">
<li>
<div class="list-title">
<a href="1ed7b4017caf4e79ab0621089b4e3d0dsourcerelative"
class="list-name nk-txt-ellipsis"
title="我们用一个等臂天平来称物体的质量,如果我们要称的物体质量范围在1到40克(整数),请问我们最少需要几块砝码可以完成这项物体质量的称量?" target="_blank">
我们用一个等臂天平来称物体的质...
</a>
</div>
<div class="tags-box">
<a href="../questioncentermutitagids602"
class="tag-label">智力题</a>
</div>
<div class="list-legend">
<span class="comm-num">
评论
<a href="1ed7b4017caf4e79ab0621089b4e3d0d">
(1)
</a>
</span>
来自
<a href="../test/915316/summary">
美团2016研发工程师笔...
</a>
</div>
</li>
<li>
<div class="list-title">
<a href="7bede69e59e1413a8919e1d7d2b0db1csourcerelative"
class="list-name nk-txt-ellipsis"
title="请问在扶梯上绑鞋带和在路上绑鞋带两种方式的比较" target="_blank">
请问在扶梯上绑鞋带和在路上绑鞋...
</a>
</div>
<div class="tags-box">
<a href="../questioncentermutitagids602"
class="tag-label">智力题</a>
</div>
<div class="list-legend">
<span class="comm-num">
评论
<a href="7bede69e59e1413a8919e1d7d2b0db1c">
(0)
</a>
</span>
来自
<a href="../test/915316/summary">
美团2016研发工程师笔...
</a>
</div>
</li>
<li>
<div class="list-title">
<a href="febe5c17570144db8a91e2a25b1fff24sourcerelative"
class="list-name nk-txt-ellipsis"
title="上网的时候发现网页不能访问,QQ使用正常,出现此问题最可能的原因是" target="_blank">
上网的时候发现网页不能访问,Q...
</a>
</div>
<div class="tags-box">
<a href="../questioncentermutitagids604"
class="tag-label">网络基础</a>
</div>
<div class="list-legend">
<span class="comm-num">
评论
<a href="febe5c17570144db8a91e2a25b1fff24">
(0)
</a>
</span>
来自
<a href="../test/915316/summary">
美团2016研发工程师笔...
</a>
</div>
</li>
<li>
<div class="list-title">
<a href="00c412ffa39a4bf383d0b219dc50b15dsourcerelative"
class="list-name nk-txt-ellipsis"
title="HTTPS是使用()来保证信息安全的." target="_blank">
HTTPS是使用()来保证信息...
</a>
</div>
<div class="tags-box">
<a href="../questioncentermutitagids608"
class="tag-label">加密和安全</a>
</div>
<div class="list-legend">
<span class="comm-num">
评论
<a href="00c412ffa39a4bf383d0b219dc50b15d">
(0)
</a>
</span>
来自
<a href="../test/915316/summary">
美团2016研发工程师笔...
</a>
</div>
</li>
<li>
<div class="list-title">
<a href="580efa5e830f41bbb6470e586ba3f761sourcerelative"
class="list-name nk-txt-ellipsis"
title="一棵非空的二叉树的先序遍历序列与后序遍历序列正好相反，则该二叉树一定满足?" target="_blank">
一棵非空的二叉树的先序遍历序列...
</a>
</div>
<div class="tags-box">
<a href="../questioncentermutitagids583"
class="tag-label">树</a>
</div>
<div class="list-legend">
<span class="comm-num">
评论
<a href="580efa5e830f41bbb6470e586ba3f761">
(0)
</a>
</span>
来自
<a href="../test/915316/summary">
美团2016研发工程师笔...
</a>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="fixed-menu">
<ul>
<li>
<a href="#top" class="gotop" title="回到顶部" id="gotop"></a>
</li>
<li>
<a class="fixed-wb" target="_blank" href="../../www.weibo.com/nowcoder"></a>
</li>
<li>
<a href="tencent_3a/groupwpa/subcmdallparam7b2267726f757055696e223a313537353934373~1" class="qq" title="QQ"></a>
</li>
<li>
<a href="javascript:void(0);" class="wx"></a>
<div class="wx-qrcode">
<img src="../../static.nowcoder.com/images/wx-rcode.jpg" alt="二维码" />
<p>扫描二维码，关注牛客网</p>
</div>
</li>
<li>
<a href="../discuss/30" class="feedback" title="意见反馈"></a>
<a href="../discuss/30" class="feedback-letter">意见反馈</a>
</li>
<li>
<a href="javascript:void(0);" class="qrcode"></a>
<div class="wx-qrcode">
<img src="../../uploadfiles.nowcoder.com/app/android/app.png" alt="二维码" />
<p>下载牛客APP，随时随地刷题</p>
</div>
</li>
</ul>
<div class="phone-qrcode" style="display:none;">
<a href="javascript:void(0);" class="qrcode-close">x</a>
<img src="../../uploadfiles.nowcoder.com/app/android/app.png" alt="二维码" style="width:70px;height:70px;" />
<p>扫一扫下载牛客APP</p>
</div>
</div>
<div class="ft-wrap">
<div class="ft-cont clearfix">
<div class="ft-main">
<ul class="ft-links">
<li><a href="../html/aboutus.htm">关于我们</a></li>
<li><a href="../html/joinus.htm">加入我们</a></li>
<li><a href="../discuss/30" target="_blank">意见反馈</a></li>
<li><a href="../html/services.htm">企业服务</a></li>
<li><a href="../html/cooperation.htm">网站合作</a></li>
<li><a href="javascript:void(0);" class="nc-req-auth nc-req-active js-test-vm">模拟终端</a></li>
<li><a href="../html/disclaimer.htm">免责声明</a></li>
<li><a href="../html/links.htm">友情链接</a></li>
</ul>
<ul class="webrights">
<li><a href="default.htm">牛客网&copy;2015 All rights reserved</a></li>
<li><a href="default.htm">浙ICP备14000860号-2</a></li>
</ul>
</div>
<dl class="ft-web-info">
<dt class="ft-web-name">牛客网，最大IT笔试面试题库</dt>
<dd class="ft-info-item">QQ群：272820159</dd>
<dd class="ft-info-item">微 信：www_nowcoder_com
<a href="javascript:;" class="btn btn-primary btn-xs">关注
<div class="tooltip top">
<div class="tooltip-arrow"></div>
<div class="tooltip-inner"><img width="80" src="../../static.nowcoder.com//images/wx-rcode.jpg" /></div>
</div>
</a>
</dd>
<dd class="ft-info-item">微 博：牛客网
<a href="../../weibo.com/nowcoder" class="btn btn-primary btn-xs" target="_blank">关注
</a>
</dd>
</dl>
<div class="ft-app">
<div class="ft-qrcode-box">
<img width="128" src="../../uploadfiles.nowcoder.com/app/app_download.png" />
</div>
<p>扫一扫，把题目装进口袋</p>
</div>
</div>
</div>

</div>
<script src="../../static.nowcoder.com/nowcoder/1.2.348/javascripts/sea.js" type="text/javascript"></script>
<script src="../../static.nowcoder.com/nowcoder/1.2.348/javascripts/base.js"></script>
<script type="text/javascript">
seajs.use('nowcoder/1.2.348/javascripts/site/common/index');
seajs.use('nowcoder/1.2.348/javascripts/site/common/nav');
</script>
<span id='cnzz_stat_icon_1253353781' style="display:none;"></span>
<script type="text/javascript">
(function (window, undefined) {
window.problem = {
id: 36406,
uuid: 'c3c9998a7c1c4dc4a705a89066f85cd9',
type: 2,
followerCnt: 7,
isAdmin: false,
isMaintainer: false,
noteId: ''
};
window.codeJudgeType = '0';
window.supportLang = '';
window.comment = {
count: 2,
all: [{"authorHonorLevel":9,"authorId":557336,"authorName":"sunburstRun","commentCnt":0,"content":"<div>  答案是;ABCD </div>\n<div>  \u00A0 \u00A0 \u00A0 \u00A0\u00A0<span style=\"color: rgb(102,102,102);\">假设线程x和y同时执行，x和y可随时被抢占，a的初始值为1</span>\n</div>\n<br>\n<span style=\"color: rgb(102,102,102);\">A：3, 2</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">y先执行++a，a为2;</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">y再执行printf，a入栈，在打印到终端之前切换到x</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">x执行＋＋a，a为3;</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">x执行printf，输出3;再切换到y</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">y执行打印，输出2</span>\n<br>\n<br>\n<span style=\"color: rgb(102,102,102);\">B：2 3</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">x先执行＋＋a，a为2;</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">x再执行printf，输出2;切换到y</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">y执行＋＋a，a为3;</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">y执行printf，输出3;</span>\n<br>\n<br>\n<span style=\"color: rgb(102,102,102);\">C：3 3</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">x先执行＋＋a，a为2;切换到y</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">y执行＋＋a，a为3;</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">y执行printf，输出3;切换到x</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">x执行printf，输出3</span>\n<br>\n<br>\n<span style=\"color: rgb(102,102,102);\">D：2 2</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">类似C，a的初始值为0即可</span>\n<br>\n<br>\n<span style=\"color: rgb(102,102,102);\">这里关键有两点：</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">（1)两个线程可随时被抢占</span>\n<br>\n<span style=\"color: rgb(102,102,102);\">（2)＋＋a和printf不是原子指令，可随时被打断；特别注意函数printf，a作为参数压栈后，a再变化则不会影响输出（printf实际打印的是压栈的参数，是值拷贝的栈变量）</span>","createTime":1446863799000,"dislikes":0,"edited":false,"headImg":"../../images.nowcoder.com/images/20150408/557336_1428507748298_557336_1425907358968_100.png_400~1.png","id":75247,"isDisLiked":false,"isLiked":false,"likes":2,"thumbNail":"../../images.nowcoder.com/images/20150408/557336_1428507748298_557336_1425907358968_100.png_40~2.png","toCommentId":0,"toUserId":0,"toUserName":"","updateTime":1446863799000}, {"authorHonorLevel":8,"authorId":171218,"authorName":"英语六级","commentCnt":0,"content":"<pre class=\"answer-text mb-10\">选项D是假设线程A先执行++a操作但没有写回到内存，这时线程B执行++a操作写回内存并printf，输出2_，线程A继续执行，++a操作写回内存，a的值保持2，再printf</pre>","createTime":1446953725000,"dislikes":0,"edited":false,"headImg":"../../images.nowcoder.com/images/20150715/171218_1436960293688_171218_1436960286509_appgalleryg~1.png","id":75400,"isDisLiked":false,"isLiked":false,"likes":1,"thumbNail":"../../images.nowcoder.com/images/20150715/171218_1436960293688_171218_1436960286509_appgallery~3.png","toCommentId":0,"toUserId":0,"toUserName":"","updateTime":1446953725000}],
sort: 2,
draft: {"content":""},
pageSize: 20,
toCommentId: 0
};
seajs.use('nowcoder/1.2.348/javascripts/site/contest/questioninpublic.js');
})(window);
</script>
<textarea id="javaTpl" style="display:none;"></textarea>
<textarea id="cTpl" style="display:none;"></textarea>
<textarea id="pythonTpl" style="display:none;">

</textarea>
<textarea id="cSharpTpl" style="display:none;">

</textarea>
<script type="text/javascript">
window.codeJudgeType = '0';
</script>
</body>
</html>
