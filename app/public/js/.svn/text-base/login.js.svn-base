define("nowcoder/1.2.356/javascripts/site/login/login",["../../lib/jquery","../../core/base","../../lib/underscore","../../util/util","../../util/cookie","../../action/login","../../util/ajax","../../core/siteConfig","../../component/input","../../util/dom","../../util/browser","../../core/component","../../util/event","../../component/popup","../../component/layer","../../util/dragdrop"],function(a){function b(){var a=this;a.remLoginChk=e("#remLoginChk"),a.info={},a.emailItem=i.transform(e("#emailIpt").parent(),{blur:function(){var b=this,c=e.trim(b.val());return g.isEmail(c)||g.isPhone(c)?(a.info.email=c,b.none(),void 0):(a.info.email="",b.errorTips("请输入正确的邮箱或手机"))}}),a.pwdItem=i.transform(e("#passwordIpt").parent(),{blur:function(){var b=e.trim(a.pwdItem.val());a.pwdItem.none(),a.info.password=b}}),a.initMoreLogin()}function c(a){a.preventDefault();var b=this;try{b.emailItem.blur(),b.pwdItem.blur()}catch(c){}var d=b.info;if(!d.email)return b.emailItem.errorTips("请输入正确的邮箱"),void 0;if(!d.password)return b.pwdItem.errorTips("请输入密码"),void 0;var e=b.remLoginChk.prop("checked");h.login({body:{email:d.email,pwd:d.password,remember:e?"true":"false"},call:function(){var a=g.getUrlCb("callBack");window.location.href=a||"/home"},error:function(a){4===a.code?b.pwdItem.errorTips(a.msg||"密码不正确，请重试！"):b.emailItem.errorTips(a.msg||!0)}})}function d(){var a=this,b=e("div.login-way div.login-fold");b.on("mouseenter",function(){a._moreLoginTimer&&window.clearTimeout(a._moreLoginTimer),b.addClass("open")}).on("mouseleave",function(){a._moreLoginTimer=window.setTimeout(function(){b.removeClass("open"),a._moreLoginTimer=null},250)})}var e=a("../../lib/jquery"),f=a("../../core/base"),g=a("../../util/util"),h=a("../../action/login"),i=a("../../component/input");a("../../component/popup"),f.ready({initialize:b,binds:{"click #loginBtn":c,"submit div.input-section form":c},initMoreLogin:d})});
